<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shin-Hanabi - Absolute Auditor</title>
    <style>
        :root { --c-bg: #111; --c-text: #eee; --c-accent: #ffd700; --c-active-border: #adff2f; }
        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; touch-action: manipulation; }
        html, body { width: 100%; height: 100%; margin: 0; padding: 0; background: var(--c-bg); color: var(--c-text); font-family: sans-serif; overflow: hidden; display: flex; flex-direction: column; }
        .controls { padding: 5px; flex-shrink: 0; background: #222; border-bottom: 1px solid #444; }
        .tab-group { display: flex; gap: 4px; margin-bottom: 5px; overflow-x: auto; }
        .tab { flex: 1; padding: 8px 4px; text-align: center; font-size: 11px; font-weight: bold; cursor: pointer; border-radius: 4px; border: 2px solid #444; opacity: 0.6; transition: all 0.2s; white-space: nowrap; min-width: 60px; filter: brightness(0.6); }
        .tab.active { opacity: 1; filter: brightness(1); border-color: var(--c-active-border); box-shadow: 0 0 8px rgba(173, 255, 47, 0.5); }
        #t-left { background: #600010; color: #ffb7ce; }
        #t-middle { background: #001040; color: #b3e5fc; }
        #t-right { background: #002005; color: #c8e6c9; }
        #s-hazure { background: #ffffff; color: #333; }
        #s-don { background: #304ffe; color: #fff; }
        #s-seven { background: #d50000; color: #fff; }
        #s-reg { background: #333; color: #fff; border: 2px solid #666; }
        .workspace { display: flex; flex-direction: row-reverse; flex: 1; overflow: hidden; padding: 10px; gap: 10px; align-items: stretch; justify-content: center; }
        .reel-container { width: 100px; height: 540px; position: relative; background: #000; border: 2px solid #333; border-radius: 4px; flex-shrink: 0; overflow: hidden; touch-action: none; }
        .reel-strip { position: absolute; width: 100%; top: 0; left: 0; will-change: transform; }
        .symbol { height: 60px; display: flex; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); position: relative; }
        .sym-idx { width: 26px; flex-shrink: 0; text-align: center; color: var(--c-accent); font-weight: bold; height: 100%; display: flex; align-items: center; justify-content: center; background: #111; border-right: 1px solid #333; z-index: 2; font-size: 11px; }
        .sym-bg { position: absolute; top: 0; left: 26px; right: 0; bottom: 0; z-index: 1; background-repeat: no-repeat; background-position: center; }
        .target-box { position: absolute; top: 180px; left: 0; width: 100%; height: 180px; border: 3px solid #ff0000; pointer-events: none; z-index: 10; }
        .results { flex: 1; height: 540px; background: #1a1a1a; border: 1px solid #333; overflow-y: hidden; border-radius: 4px; display: flex; flex-direction: column; }
        .res-row { display: flex; border-bottom: 1px solid rgba(0,0,0,0.1); height: 33.75px; align-items: center; padding: 0 10px; font-family: monospace; font-weight: bold; flex-shrink: 0; }
        .res-name { width: 90px; font-size: 11px; flex-shrink: 0; line-height: 1; }
        .res-data { flex: 1; text-align: right; font-size: 16px; letter-spacing: 1px; line-height: 1; }
        .f-hazure { background: #ffffff; color: #333333; }
        .f-rep { background: #b3e5fc; color: #01579b; }
        .f-bell { background: #fff176; color: #827717; }
        .f-suika { background: #a5d6a7; color: #1b5e20; }
        .f-cher { background: #ef9a9a; color: #b71c1c; }
        .f-tok { background: #e1bee7; color: #4a148c; }
    </style>
</head>
<body>
    <div class="controls">
        <div class="tab-group">
            <div id="t-left" class="stop-tab tab active" onclick="app.setStop('left')">左リール</div>
            <div id="t-middle" class="stop-tab tab" onclick="app.setStop('middle')">中リール</div>
            <div id="t-right" class="stop-tab tab" onclick="app.setStop('right')">右リール</div>
        </div>
        <div class="tab-group">
            <div id="s-hazure" class="state-tab tab active" onclick="app.setState('hazure')">未成立</div>
            <div id="s-don" class="state-tab tab" onclick="app.setState('don')">ドンビッグ成立</div>
            <div id="s-seven" class="state-tab tab" onclick="app.setState('seven')">７ビッグ成立</div>
            <div id="s-reg" class="state-tab tab" onclick="app.setState('reg')">Reg成立</div>
        </div>
    </div>
    <div class="workspace">
        <div id="touch-area" class="reel-container"><div class="target-box"></div><div id="reel-strip" class="reel-strip"></div></div>
        <div class="results" id="result-list"></div>
    </div>

<script>
const FLAG_INFO = [
    { k: "hazure", n: "ハズレ", c: "hazure" },
    { k: "rep_normal", n: "リプレイ", c: "rep" },
    { k: "rep_jac", n: "JACリプ", c: "rep" },
    { k: "rep_rt", n: "RTリプ", c: "rep" },
    { k: "bell_a", n: "ベルＡ", c: "bell" },
    { k: "bell_b", n: "ベルＢ", c: "bell" },
    { k: "sui_a", n: "氷Ａ", c: "suika" },
    { k: "sui_b", n: "氷Ｂ", c: "suika" },
    { k: "cher_a1", n: "チェリーＡ1", c: "cher" },
    { k: "cher_a2", n: "チェリーＡ2", c: "cher" },
    { k: "cher_b", n: "チェリーＢ", c: "cher" },
    { k: "tok_a", n: "特殊役Ａ", c: "tok" },
    { k: "tok_b", n: "特殊役Ｂ", c: "tok" },
    { k: "tok_c", n: "特殊役Ｃ", c: "tok" },
    { k: "tok_d", n: "特殊役Ｄ", c: "tok" },
    { k: "tok_e", n: "特殊役Ｅ", c: "tok" }
];

const REEL_SYMBOLS = {
    left: ["Don","Sui","Che","Bar","Sui","Bel","Rep","Sui","Bel","Rep","Don","Bel","Rep","Bar","Sui","Bel","Rep","Seven","Sui","Bel","Rep"],
    middle: ["Bel","Che","Rep","Bel","Che","Sui","Seven","Sui","Bel","Bar","Che","Rep","Bel","Che","Don","Rep","Bel","Che","Sui","Che","Rep"],
    right: ["Che","Bel","Sui","Rep","Che","Seven","Bel","Sui","Rep","Che","Bel","Rep","Bar","Che","Bel","Sui","Rep","Don","Bel","Sui","Rep"]
};

const LEFT_REEL_SLIP_MASTER = {
    hazure: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,,,,,0,1,,,,,,,,,0,1,,,,,,,,,,,,,,0,,2,,,0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [0,1,,,,,1,,,,,,,,,,1,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,2,3,,,,,,,0,1,2,3,,,,,,,0,,,,,0,1,2,3,4,,1,,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [0,,,3,,0,1,2,3,4,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,0,1,,,,,,,,,0,,,,,0,1,2,3,4,,,,,,,1,2,,,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,1,2,,,,,,,,0,1,2,,,0,1,,,,,,,,,,,,,,,,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,0,1,2,,,,,,,,,1,2,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,,,1,2,3,,,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,1,2,3,4,,,,,,0,1,2,3,,,,,,,,,2,,,0,,,3,4,,,,3,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,0,,2,3,4,0,1,,,4,,1,,3,,,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,4,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,1,,,,0,1,2,,,,,,,,0,,,,,0,1,2,3,4,0,,,,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,1,,,,,,,,,0,1,2,3,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    Vsus: {
        21: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,2,,4,,,,,],
        20: [,,,,,0,1,,,,,,,,,0,1,,,,,,,,,,,,,,,,2,,,,,2,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,2,,,,,,,],
        19: [0,1,,,,,1,,,,0,1,,3,,,1,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,,,,1,,,4,0,1,2,3,,0,1,2,,4,,,,3,,0,1,,,],
        18: [,,2,,,,,,,,,1,,3,4,,,,,,0,,,,,0,1,,3,4,,1,,3,4,,1,,3,4,,,,,,,,,,,,,,,,,1,,,4,,,,3,4,,,2,,4,,,,3,,,,2,,],
        17: [0,,2,3,,0,1,2,3,4,,,,,,0,1,2,3,4,0,1,2,3,,,1,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,3,,0,,2,3,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [0,1,,,,,,,,,0,,,,4,,,,,,0,,,3,4,,1,,,4,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        12: [,,,,,0,1,,,,0,1,2,,,0,1,,,,0,1,,,,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,,,0,1,,,,0,,2,,4,0,1,,,],
        10: [,1,,,,0,1,2,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,,,1,2,3,,,1,2,,,,,,,,,,2,,4,,1,,3,,0,,,,,,1,,3,],
        9: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,4,,1,,3,4,,1,,3,4,,1,,3,4],
        8: [,1,,3,,,,,,,0,1,2,,4,,,,,,0,,,3,,0,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,2,,4,,,,,4,,,,,,,,,,4,,,,,],
        7: [,1,,3,,0,1,2,3,4,,,2,,,0,1,2,3,4,0,1,,3,,0,1,2,3,4,,1,2,3,,,1,2,3,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,,3,,,,,,,,,,3,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,1,2,3,4,,,,,,0,1,,,,,,,,,0,,,,,,,,,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,,,,0,1,,,,0,1,2,3,4,0,1,2,3,4],
        2: [,,,,,0,1,2,,,,,,,,0,1,2,,,0,1,2,3,4,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,,,,,,,,,,,,,,,,],
        1: [,,,,,,,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,2,,,,,,,,,,,,],
    },
    seven: {
        21: [,,,,,,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,,,,,,,2,,,,1,,,,0,1,,,,,,,,,,,,,,0,,,,,0,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,,,,0,1,2,,,0,,,,,0,,,,],
        19: [0,1,,,4,0,,,,,,1,,,,,1,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,,,0,,,3,,0,1,2,3,,,,,,,0,1,,3,,0,1,,3,],
        18: [,1,,,4,,,,,,,,,,,,,,,,0,,,,,0,1,,,4,0,1,,3,4,0,1,,3,4,,,,,,,,,,,,,,,,0,,,,,,,,3,4,,1,2,3,4,,,,3,,,,,3,],
        17: [,1,,,4,0,1,2,3,4,0,1,,3,4,0,1,2,3,4,0,1,2,3,4,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,,,,,,4,,,,,,0,,,3,4,0,,,3,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,4,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,0,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,1,2,3,4,,,,,,,1,,,,,,,,,,,,,,0,1,2,3,4,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,0,,,,,,1,,,,0,1,2,,,,1,,,,0,1,2,,],
        12: [,,,,,0,1,2,,4,,,,,,0,1,,,,0,1,2,3,4,,,,,,,1,2,,,,1,2,,,,,,,,,,,,,,,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,,,,,,,,,1,,3,,,,,,,,,,,,,,,,,,,2,3,4,,,2,3,4,,,2,3,4,,,,,,,,,,,,1,2,3,4,0,1,2,,,,1,2,3,,0,1,2,,,,1,2,,],
        10: [,,,,,,1,,,4,,1,,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,,,1,2,3,,,,,,,,,2,,4,,,,3,,,,2,,4,,,2,,4],
        9: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,4,,,,3,4,,,2,,4,,,2,,4],
        8: [0,,2,,4,,,,,,,,,,,,,,,,,,2,,,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,,4,,,,,,,,,,4,,,,,4],
        7: [0,,2,,,0,,2,3,4,0,1,,,4,0,1,2,3,4,0,,2,3,4,0,,2,,,,1,2,3,,,1,2,3,,,,,,,,,,,,,,,,,,1,,3,,,,,,,,,,3,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,4,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,0,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,1,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,,,,,0,,,,,,,,,,,,,,,,,,,,0,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        2: [,,,,,0,1,2,,,,,,,,0,1,2,,,0,1,2,3,4,,,,,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,],
        1: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
    },
    reg: {
        21: [,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,,,,,,,2,,,0,1,,,,0,1,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,0,,,,,0,1,2,,,0,1,2,,,,,,,,0,,,,],
        19: [0,1,,3,,0,,,,,,1,,,,,1,,,,,,,,,,,,,,0,,,3,,0,,,3,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,0,1,,,,0,1,,3,],
        18: [,,,3,,,,,,,,,,,,,,,,,0,,,,,0,1,,,4,0,1,,3,4,0,1,,3,4,,,,,,,,,,,,,,,,0,1,2,3,4,,1,2,3,4,,1,2,3,4,,,2,,,,,,3,],
        17: [0,,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,,0,,,3,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,4,,,,,4,,,,,4,0,1,2,3,4,0,1,,,,0,1,2,,,0,1,,,,0,1,,,],
        12: [,,,,,0,1,2,,4,0,1,,,,0,1,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,4,,,,3,4,,,,,,,,,,,,,,,,,,,3,4,0,1,2,3,,,1,2,3,,0,1,,,,0,1,2,3,4],
        10: [,,2,,,,1,,,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,2,,,,,,,,,,,3,,,,,3,,,1,,3,,,,,,4],
        9: [,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,4,,,,3,4,,,,3,4,,1,,3,4,,,,,4],
        8: [,,2,,4,,,,,,,,,,,,,,,,,,2,,,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,4],
        7: [,,2,,,0,,2,3,4,0,1,2,3,4,0,1,2,3,4,0,,2,3,4,0,,2,,,,1,2,3,,,1,2,3,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,3,,,,,3,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [0,1,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,,,,,0,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        2: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,0,1,2,3,4,,,,,4,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,2,,,0,1,,,],
    }
    
};

const MIDDLE_REEL_SLIP_MASTER = {
    hazure: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,2,3,,,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,2,3,4,0,1,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    don: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,2,3,4,0,1,2,3,,,,2,3,,0,1,2,3,,0,1,2,,],
        19: [0,1,2,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,,,,,,,,,,,,,,,,,,,,,0,,,,],
        16: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,],
        15: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,,1,,3,4,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,,4],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,,4,,,2,,4],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,0,1,2,,,0,,,,,,,,,,,,,,,,,2,,,,,,,],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,,,,,,,,,,,,,,,,,1,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,],
        8: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,3,,0,,,3,,0,,,3,,0,,2,3,,0,1,,,,0,1,,,,0,,,,,0,,2,3,],
        7: [0,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,3,4,0,1,,3,4,0,1,,3,4,0,,,,,,,,,,,,,,,0,1,2,3,4,0,,,,4],
        6: [,1,,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,1,,,,,1,,,,,,,,4,,,,,4,,,,,4,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,4,,,2,,4],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,,3,4,,,,3,4,,,,3,4,0,,,3,4,,,,,,,,,,,,,,,,,,,3,4],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,4,,,,,,,,,,4,,,,,,,,,,],
        2: [,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,4,,1,2,,,,1,2,,4,,1,2,,,,,,,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    seven: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,,,,,,,,,1,2,,,0,1,2,,,0,1,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,],
        16: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,4,0,,,,4,0,,,,,0,,,,,0,,,,,0,1,2,3,4,0,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        15: [0,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,4,0,1,2,,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,4,0,1,2,3,4,,,,,4,,,,,4,,,,,4],
        14: [,,2,,4,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4,,,,,4],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,4,,,,3,4,,,2,3,4,,,2,3,4,,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,1,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,],
        8: [,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,,3,,,,,3,,,,,3,,0,1,2,3,,0,1,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,],
        7: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,2,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [,,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,3,4,0,,,3,4,,1,2,3,4,,1,2,3,4,,1,2,3,4,0,1,,,,,,,,,0,1,,,,0,1,,,,0,1,,,],
        3: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,4,0,1,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,,,,,,,,,,,,,0,1,2,3,4,,1,2,,,0,1,2,3,4,0,1,2,3,,0,1,2,3,],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    reg: {
        21: [,,,,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,2,,,0,1,2,,,0,1,2,,,0,1,2,,,,,2,3,,,,2,3,,,,2,3,,,,2,3,,,,2,,],
        19: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,],
        16: [0,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,,0,,2,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,,0,,,,],
        15: [0,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,4,0,,2,3,4,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        14: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,,4,,,,,4],
        13: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,3,4,,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,1,2,3,4,,,,,,,,,,,,,2,3,4,,,2,3,4],
        10: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,0,,,,,,,,,,,,,,],
        8: [,,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,3,,,,2,3,,,,,3,,,,,3,,,,,3,,,,,,,0,1,,,,0,1,,,,,,,,,,,,,],
        7: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,3,4,,1,,3,4,,1,,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,,0,1,2,3,],
        5: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,,2,3,4,,,2,3,4,,,2,3,4,0,1,,3,,,,,3,,,,,3,,,,,3,,,,,3,],
        3: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,2,,4,0,1,2,,4,,,,,,,,,,,,,,,,0,,2,3,4,,,2,3,4,,,2,3,4,0,,2,3,4,0,,2,3,4],
        1: [,,,,,0,1,2,,,0,1,2,,,0,1,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    }
};

const RIGHT_REEL_SLIP_MASTER = {
    hazure: {
        21: [,1,,3,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,3,,,1,,3,,,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,2,,,0,,2,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        17: [0,1,2,3,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,,,1,,3,,,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,1,2,,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,1,,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,,,0,,2,,,,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,2,,4,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        8: [0,,2,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,,,0,,2,,,,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        4: [0,1,2,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,2,,,0,,2,,,,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [0,1,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,1,2,,,,1,2,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
    },
    don: {
        21: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [,,2,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,2,,,,,2,,,,1,,,,,1,,,,,1,,,,,1,,3,,,,,,,,,,,,,1,,,,,1,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [,1,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,,2,,4,0,1,2,3,,0,1,2,3,,0,1,,,,0,1,2,,4],
        17: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [0,,2,,4,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,0,,2,,4,0,,2,,4,,,,3,,,,,3,,,,,3,,,1,,,,,,2,,,,,2,,,0,1,2,3,4,,1,,3,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,],
        14: [,1,,3,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,1,,3,,,1,,3,,0,,2,,4,0,,2,,4,0,,2,,4,,,,,,,,,,,,,,,,,,,,4,,,,,],
        13: [,,,,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,3,,0,1,,,,0,1,,,,,,,,,,1,,3,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [,1,,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,3,,,1,,3,,0,,2,,,0,,2,,,0,,2,,,0,,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,0,,2,3,4],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,,,],
        9: [0,,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,2,,,0,,2,,,,1,,,,,1,,,,,1,,,,,,,,,,,,3,,,,,3,,,1,,,,,,,,],
        8: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,1,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,,,,,1,,,,0,1,,,,0,1,,,,0,1,,,,,1,,,,,,,,,,,,,,0,1,,,,,1,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [0,1,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,1,2,,,0,1,2,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,0,1,2,,,0,1,2,3,,0,1,2,3,,0,1,,,,0,1,2,,],
        4: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,1,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,2,3,4,,1,2,3,4,,,2,3,4,,,2,3,4,,,2,3,4,,1,2,3,4,,,2,3,4,,,2,3,4,0,1,2,3,4,,1,2,3,4],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,,,,,,,],
    },
    seven: {
        21: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,,3,,0,1,,3,,0,,,3,,0,,,3,,0,,,3,,0,,2,3,,,,,,,0,,,,,0,,,,,0,,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,0,,,,,0,,,,,0,,,,],
        18: [0,,2,,4,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,0,,2,,4,0,,2,,4,0,,2,,4,0,,2,,4,0,,2,,4,,,,,,0,1,2,3,,0,1,,,,0,1,,,,0,1,,,],
        17: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,1,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,1,,3,4,,1,,3,4,,1,,,,,1,,,,,1,,,,0,1,2,,,,,2,,,0,1,2,,,0,1,2,3,4,0,1,2,,],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,,,,,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [0,1,,3,,0,1,2,3,4,,,,,,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,0,1,,,,0,,,,,0,1,,,,0,,,,,,,,,,0,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,,,,,,,,0,,2,,,,,2,,,0,,2,,],
        11: [0,,2,3,4,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,,2,3,4,0,1,2,3,4,0,,2,3,4,0,,2,3,4,0,,2,3,4],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [,,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3,,,,,3,,,,,3,,,,,,,,,,3,,,,,,,,,,,,,,,,],
        8: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [,1,2,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,2,3,,,1,2,3,,,,2,,,,,2,,,,,2,,,,1,2,,,,,,,,,1,2,,,,1,2,,,,1,2,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,2,,,,,2,,,,,2,,],
        5: [,,2,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,2,,,,,2,,,,1,2,3,,,1,2,3,,,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,],
        4: [,,,,,0,1,2,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,1,2,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,1,2,,,,1,2,,,,,,,,,,,,,,,,,,0,,,3,,,,,,,0,,,3,,0,,,3,,0,,,3,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,,,,,,0,1,,,,0,1,,,,0,1,,,],
        1: [,1,,,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,,,1,,,,,1,,,,0,1,,3,,0,1,,3,,0,1,,3,,,,,,,0,1,2,3,,,,,,,,,,,,,,,,],
    },
    reg: {
        21: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        20: [0,1,,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,,3,,0,1,,3,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,,0,1,,,],
        19: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        18: [0,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,4,0,,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        17: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        16: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,3,,,,,3,,,,,3,,,,,,,,,,3,4,,,,3,4,,,,3,4,,,,3,4],
        15: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        14: [,1,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,,,1,2,,4,,1,2,,4,,,2,,4,,,2,,4,,,2,,4,,,,,,,,,,,,,,,,,,,,,,,,,],
        13: [,,,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,],
        12: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,,,,,,,,,,,,,,,,,],
        11: [0,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,,,,,0,,,,,0,,2,,,0,,2,,,0,,2,,,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,,,,0,1,2,3,4],
        10: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        9: [0,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,0,1,,,,0,1,,,,,1,,,,,1,,,,,1,,,,,,,,,,,,,,,,,,,0,1,,,,,,,,],
        8: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        7: [0,1,,3,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,0,1,,3,,0,1,,3,,0,1,,3,,0,1,,3,,0,1,,3,,,1,,,,,1,,,,,1,,,,0,1,,,,,1,,,],
        6: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        5: [0,,2,3,4,,,,,,,,,,,,,,,,,,,,,,,,,,0,,2,3,4,0,,2,3,4,0,,2,3,4,0,,2,3,4,0,,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4],
        4: [,,,,,0,1,2,3,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        3: [,,,,,,,,,,,,,,,,,,,,0,1,2,3,,0,1,2,3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        2: [,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],
        1: [,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,,,1,,,],
    }
};



const app = {
    state: { reel: 'left', flagMode: 'hazure', positions: { left: 13, middle: 15, right: 3 } },
    init() { this.render(); this.attach(); this.update(); },
    render() {
        const win = document.getElementById('reel-strip'); win.innerHTML = '';
        const syms = REEL_SYMBOLS[this.state.reel];
        const assets = { left: "reel1.png", middle: "reel2.png", right: "reel3.png" };
        for (let l = 0; l < 3; l++) {
            syms.forEach((s, i) => {
                const el = document.createElement('div'); el.className = 'symbol';
                const p = 21 - i;
                el.innerHTML = `<div class="sym-idx">${p}</div><div class="sym-bg" style="background-image:url('${assets[this.state.reel]}');background-size:100% 1260px;background-position:center -${i*60}px"></div>`;
                win.appendChild(el);
            });
        }
    },
    update() {
        const stopNum = this.state.positions[this.state.reel];
        document.querySelectorAll('.stop-tab').forEach(el => el.classList.toggle('active', el.id === `t-${this.state.reel}`));
        document.querySelectorAll('.state-tab').forEach(el => el.classList.toggle('active', el.id === `s-${this.state.flagMode}`));
        const list = document.getElementById('result-list'); list.innerHTML = '';
        let master = (this.state.reel === 'left') ? LEFT_REEL_SLIP_MASTER : (this.state.reel === 'middle' ? MIDDLE_REEL_SLIP_MASTER : RIGHT_REEL_SLIP_MASTER);
        const mode = (this.state.flagMode === 'don') ? 'Vsus' : this.state.flagMode;
        const modeData = master[mode] || master['don'];
        const row = modeData ? modeData[stopNum] : null;
        let foundAny = false;
        if (row) {
            FLAG_INFO.forEach((fd, fIdx) => {
                const slips = [];
                for (let s = 0; s < 5; s++) {
                    const val = row[fIdx * 5 + s];
                    if (val !== undefined && val !== null && val !== "") slips.push(val);
                }
                if (slips.length > 0) {
                    foundAny = true;
                    const el = document.createElement('div'); el.className = `res-row f-${fd.c}`;
                    el.innerHTML = `<div class="res-name">${fd.n}</div><div class="res-data">[${slips.sort((a,b)=>b-a).join('')}]</div>`;
                    list.appendChild(el);
                }
            });
        }
        if (!foundAny) list.innerHTML = '<div style="padding:20px;text-align:center;color:#555;">停止しません</div>';
        const y = -(21 * 60) - ((21 - stopNum) * 60) + 240;
        document.getElementById('reel-strip').style.transform = `translate3d(0, ${y}px, 0)`;
    },
    setStop(r) { this.state.reel = r; this.render(); this.update(); },
    setState(s) { this.state.flagMode = s; this.update(); },
    attach() {
        let isD = false, sy = 0, sn = 0;
        const area = document.getElementById('touch-area');
        const st = (y) => { isD = true; sy = y; sn = this.state.positions[this.state.reel]; };
        const mv = (y) => { if (!isD) return; let n = sn - Math.round((sy - y) / 60); while (n > 21) n -= 21; while (n < 1) n += 21; if (this.state.positions[this.state.reel] !== n) { this.state.positions[this.state.reel] = n; this.update(); } };
        
        area.addEventListener('touchstart', e => { st(e.touches[0].pageY); e.preventDefault(); }, { passive: false });
        window.addEventListener('touchmove', e => { if (isD) e.preventDefault(); mv(e.touches[0].pageY); }, { passive: false });
        window.addEventListener('touchend', () => isD = false);
        area.addEventListener('mousedown', e => st(e.pageY));
        window.addEventListener('mousemove', e => mv(e.pageY));
        window.addEventListener('mouseup', () => isD = false);
        
        // 誤ダブルタップ（ズーム）の物理抑制
        document.addEventListener('dblclick', e => e.preventDefault(), { passive: false });
    }
};
window.onload = () => app.init();
</script>
</body>
</html>